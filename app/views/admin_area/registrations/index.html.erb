<div class="container my-5">
  <h2 class="mb-4">Admin Dashboard</h2>

  <!-- Summary Metrics -->
  <div class="row mb-4">
    <div class="col-lg-3 col-sm-6 mb-4">
      <div class="card text-white bg-primary">
        <div class="card-body">
          <h5 class="card-title">Total Registrations</h5>
          <p class="card-text"><%= @total_registrations %></p>
        </div>
      </div>
    </div>

    <div class="col-lg-3 col-sm-6 mb-4">
      <div class="card text-white bg-info">
        <div class="card-body">
          <h5 class="card-title">Registrations by College</h5>
          <ul>
            <% @registrations_by_college.each do |college, count| %>
              <li><%= college %>: <%= count %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  </div>

<h4 class="mt-5">Daily Registration Trends</h4>
<canvas id="registrationsChart" width="400" height="150"></canvas>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const ctx = document.getElementById("registrationsChart").getContext("2d");
    const registrationsChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: <%= @daily_registrations.keys.to_json.html_safe %>,
        datasets: [{
          label: "Registrations",
          data: <%= @daily_registrations.values.to_json.html_safe %>,
          borderColor: "rgba(75, 192, 192, 1)",
          fill: false,
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  });
</script>


  <!-- Recent Registrations Table -->
  <h4 class="my-4">Recent Registrations</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Email</th>
        <th>Phone Number</th>
        <th>College</th>
        <th>Registration Date</th>
      </tr>
    </thead>
    <tbody>
      <% @recent_registrations.each do |registration| %>
        <tr>
          <td><%= registration.full_name %></td>
          <td><%= registration.email %></td>
          <td><%= registration.phone_number %></td>
          <td><%= registration.college %></td>
          <td><%= registration.created_at.strftime("%d %b %Y") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

